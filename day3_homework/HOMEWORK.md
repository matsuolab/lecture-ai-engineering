# 第3回任意課題

## 質問設計の観点と意図
AWSを活用した機械学習システムの構築を想定し設問を策定した。
設問設計の意図は以下の二点である。

第一に、本講義の前提条件として「PyTorchによるモデル学習経験およびHugging Faceを用いた事前学習済みモデル活用経験」が掲げられており、
受講者には機械学習に関する基礎知識が備わっていると想定される。一方で、AWSをはじめとするIaaSの運用経験は前提とされていないため、
受講者から関連質問が多く寄せられる可能性が高いと考えた。

第二に、AWSの公式ドキュメントは網羅性および正確性に優れており、関連文献の入手が容易であることから、設問の参考資料として適切であると判断した。

## 質問セット
回答は、ChatGPT o3（検索機能ON）により生成したものを記載している。
質問6は、2025年1月以降に発生した事象であり、ナレッジカットオフ以降であるためLLM単体で答えることができない。

### 1. すでに構築したクラウド環境を IaC に変換する機能はありますか？  
**回答**  
はい。AWS CloudFormation の *Resource Import* 機能では、既存リソースをテンプレートに記述してスタックへ取り込みます 。  
Terraform でも `terraform import` コマンドを使い、状態ファイルに既存リソースを登録できます 。  

---

### 2. 大量の機械学習トレーニングデータはどこに保管すべきですか？  
**回答**  
Amazon S3 が推奨です。オブジェクトを自動で冗長化し、11 ナイン (99.999999999 %) の耐久性を提供します。
データレイクや SageMaker とネイティブ統合され、ペタバイト級でもスケールを意識せずに利用できます 。  
S3 イベントで Lambda を呼び出せば、取込直後の前処理やメタデータ登録も自動化できます 。

---

### 3. SageMaker のトレーニングジョブが S3 にアクセスするには IAM ユーザーが必要ですか？  
**回答**  
IAM ユーザーは不要です。SageMaker には **IAM 実行ロール**を付与し、そのロールに `s3:*` など必要なポリシーをアタッチします 。  
ジョブ実行時、SageMaker はこのロールを引き受けて S3 や CloudWatch などのサービス API を呼び出します 。

---

### 4. SageMaker のトレーニング費用を抑える方法はありますか？  
**回答**  
Amazon SageMaker **Managed Spot Training** を有効にすると、オンデマンド比で最大 90 % のコスト削減が可能です 。  
Spot 中断に備えてチェックポイントを S3 に保存する仕組みがあり、再開時に自動で引き継げます 。  
学習時間よりコスト優先のワークロードで効果が高いベストプラクティスです 。

---

### 5. Notebook Instance と SageMaker Studio はどう使い分けるべきですか？  
**回答**  
Studio Classic ノートブックは起動が Notebook Instance より 5–10 倍速く、インスタンス種別もブラウザから即変更できます 。  
Notebook Instance はシングルユーザーで完全に分離した環境が欲しい場合や、従来の CLI/SDK 手順を重視するケースに向きます 。  
いずれも従量課金ですが、Studio はアイドル状態の EFS ストレージ料金、Instance は EC2 実行料金の最小化がポイントです 。

---

### 6. BedrockでDeepSeek-R1を使った場合、どのくらいの推論コストがかかりますか？
**回答**  
1,000 入力トークンあたりの料金は0.00135 USD、1,000 出力トークンあたりの料金は0.0054 USDです。
これは、他のオープンモデル（Llama 3.3など）に対して比較的高い料金となっています。

# 実験
## ベースのLLM（RAGなし）での回答
### 1. すでに構築したクラウド環境を IaC に変換する機能はありますか？
**回答**
はい、すでに構築したクラウド環境を Infrastructure as Code (IaC) に変換する機能はあります。例えば、AWS CloudFormation、Azure Resource Manager (ARM)、Google Cloud Deployment Manager などのクラウドプロバイダーが提供するツールや、third-party のソフトウェアとして、Cloudify、Terraform、Ansible などがあります。これらのツールを使用することで、既に構築されたクラウド環境を IaC に変換し、自動化されたインフラストラクチャーの管理を実現することができます。

---

### 2. 大量の機械学習トレーニングデータはどこに保管すべきですか？その理由も含めて説明してください。
**回答**
大量の機械学習トレーニングデータは、セキュアでアクセス制限のあるストレージに保管すべきです。理由は、以下の通りです。

1. データのセキュリティー：機械学習トレーニングデータには、個人情報や商業機密情報などが含まれることがあります。セキュアなストレージでデータを保管することで、不正アクセスやデータ漏洩を防ぐことができます。
2. データの整合性：大量のトレーニングデータを保管するには、ストレージの容量や性能が必要です。セキュアなストレージでは、データの整合性を保つことができます。
3. データのアクセス制限：機械学習トレーニングデータは、特定のチームや個人にのみアクセスする必要があります。セキュアなストレージでは、アクセス制限を設定することができます。

日本の企業では、以下のようなストレージを使用することが多いです。

* Amazon S3：クラウドベースのストレージサービスで

---

### 3. SageMakerのトレーニングジョブが S3 にアクセスするには IAM ユーザーが必要ですか？
**回答**
はい、SageMakerのトレーニングジョブがS3にアクセスするには、IAMユーザーが必要です。SageMakerは、IAMを使用してS3にアクセスするための認証を行います。SageMakerのIAMロールには、S3にアクセスするための権限が必要です。特に、S3バケットに書き込みや読み取りを行う権限が必要です。SageMakerの設定で、IAMロールを指定することで、SageMakerがS3にアクセスするための認証を行うことができます。

---

### 4. SageMakerのトレーニング費用を抑える方法はありますか？
**回答**
はい、SageMakerのトレーニング費用を抑える方法はいくつかあります。以下はその一例です。

1. ハイパーパラメーターのチューニング：適切なハイパーパラメーターを選択することで、モデルがより効率的に学習することができます。
2. モデルの圧縮：モデルを圧縮することで、ストレージやネットワークの使用量を減らすことができます。
3. 並列化：複数のGPUやインスタンスに分散して計算を実行することで、トレーニング時間を短縮することができます。
4. 低コストのインスタンスの使用：低コストのインスタンスを使用することで、トレーニング費用を抑えることができます。
5.  Early Stopping：モデルが過学習するのを防ぐために、早期に停止することができます。

これらの方法を組み合わせることで、SageMakerのトレーニング費用を抑えることができます。

---

### 5. Notebook Instance と SageMaker Studio はどう使い分けるべきですか？
**回答**
Notebook InstanceとSageMaker Studioは、AWS SageMakerの2つのサービスです。Notebook Instanceは、Jupyter NotebookやApache Zeppelinなどのnotebook環境を提供し、データサイエンティストや機械学習エンジニアがコードを実行するための環境を提供します。SageMaker Studioは、統合された開発環境で、データサイエンティストや機械学習エンジニアが、データの探索、特徴量の作成、モデル開発、デプロイメントなど、機械学習の全プロセスを一元化して実行することができます。

Notebook Instanceは、個々のnotebook環境を提供し、各々のプロジェクトに特化した環境を提供します。SageMaker Studioは、複数のnotebook環境を統合し、プロジェクト全体のビューを提供します。したがって、Notebook Instanceは、個々のnotebook環境を提供し、SageMaker Studioは、プロジェクト全体のビューを提供するという使い分けが適切です。

---

### 6. BedrockでDeepSeek-R1を使った場合、どのくらいの推論コストがかかりますか？
**回答**
BedrockのDeepSeek-R1は、推論コストを最小化するために設計された。具体的には、推論コストは、DeepSeek-R1のモデルサイズ、推論の精度、ハードウェアの性能などに依存します。

しかし、Bedrockの公式ドキュメントによると、DeepSeek-R1の推論コストは、通常の推論コストの1/10から1/100程度に抑えられます。例えば、1秒あたり100万回の推論を実行する場合、DeepSeek-R1では1秒あたり1万回から10万回の推論を実行することができます。

ただし、実際の推論コストは、ハードウェアの性能、モデルサイズ、推論の精度などに依存するため、実際の推論コストは異なる可能性があります。

---

### **評価結果**
| 評価番号 | スコア | 人による判定 | 備考 |
|:--------:|:------:|:------:|:------:|
| 1 | 2.00 | NG | CloudfyやAnsibleなどは変換機能持たない |
| 2 | 0.00 | OK | 一般論としては正しい |    
| 3 | 0.00 | NG | 誤りが記載されている | 
| 4 | 0.00 | NG | コストダウンにはほとんど繋がらない内容 | 
| 5 | 0.00 | NG | 誤りが記載されている |
| 6 | 0.00 | NG | 推論時の計算量の話になった | 

## RAGありでの回答
RAGに与える事前情報は、AWSの公式ドキュメントから
質問に含まれるキーワードで検索したページのHTMLをパースして利用する。
パースには[HtmlRAG](https://github.com/plageon/HtmlRAG/tree/main)を用いる
参照： https://arxiv.org/abs/2411.02959v1

### 1. すでに構築したクラウド環境を IaC に変換する機能はありますか？

対象となるドキュメント:
 IaC ジェネレーターの機能は、すべての商用リージョンで利用可能で、多くの一般的な AWS リソースタイプをサポートしています。
サポートされているリソースの一覧については、「リソースタイプのサポート」を参照してください。
トピック考慮事項リソースのスキャンに必要な IAM アクセス許可テンプレートの生成、管理、削除によく使用されるコマンドテンプレートを AWS CDK に移行するCloudFormation IaC ジェネレーターを使用してリソーススキャンを開始するCloudFormation コンソールでスキャンの概要を表示するIaC ジェネレーターを使用してスキャンされたリソースから CloudFormation テンプレートを作成するスキャンしたリソースから CloudFormation スタックを作成する書き込み専用プロパティを解決する
読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。


対象となるドキュメント:
 読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。

次の表は、IaC の生成機能に使用できるクォータの一覧です。



対象となるドキュメント:
 IaC ジェネレーターの機能は、すべての商用リージョンで利用可能で、多くの一般的な AWS リソースタイプをサポートしています。
サポートされているリソースの一覧については、「リソースタイプのサポート」を参照してください。
トピック考慮事項リソースのスキャンに必要な IAM アクセス許可テンプレートの生成、管理、削除によく使用されるコマンドテンプレートを AWS CDK に移行するCloudFormation IaC ジェネレーターを使用してリソーススキャンを開始するCloudFormation コンソールでスキャンの概要を表示するIaC ジェネレーターを使用してスキャンされたリソースから CloudFormation テンプレートを作成するスキャンしたリソースから CloudFormation スタックを作成する書き込み専用プロパティを解決する
読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。


対象となるドキュメント:
 読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。

次の表は、IaC の生成機能に使用できるクォータの一覧です。




対象となるドキュメント:
 IaC ジェネレーターの機能は、すべての商用リージョンで利用可能で、多くの一般的な AWS リソースタイプをサポートしています。
サポートされているリソースの一覧については、「リソースタイプのサポート」を参照してください。
トピック考慮事項リソースのスキャンに必要な IAM アクセス許可テンプレートの生成、管理、削除によく使用されるコマンドテンプレートを AWS CDK に移行するCloudFormation IaC ジェネレーターを使用してリソーススキャンを開始するCloudFormation コンソールでスキャンの概要を表示するIaC ジェネレーターを使用してスキャンされたリソースから CloudFormation テンプレートを作成するスキャンしたリソースから CloudFormation スタックを作成する書き込み専用プロパティを解決する
読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。


対象となるドキュメント:
 読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。

次の表は、IaC の生成機能に使用できるクォータの一覧です。



対象となるドキュメント:
 IaC ジェネレーターの機能は、すべての商用リージョンで利用可能で、多くの一般的な AWS リソースタイプをサポートしています。
サポートされているリソースの一覧については、「リソースタイプのサポート」を参照してください。
トピック考慮事項リソースのスキャンに必要な IAM アクセス許可テンプレートの生成、管理、削除によく使用されるコマンドテンプレートを AWS CDK に移行するCloudFormation IaC ジェネレーターを使用してリソーススキャンを開始するCloudFormation コンソールでスキャンの概要を表示するIaC ジェネレーターを使用してスキャンされたリソースから CloudFormation テンプレートを作成するスキャンしたリソースから CloudFormation スタックを作成する書き込み専用プロパティを解決する
読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。


対象となるドキュメント:
 読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。

次の表は、IaC の生成機能に使用できるクォータの一覧です。




対象となるドキュメント:
 IaC ジェネレーターの機能は、すべての商用リージョンで利用可能で、多くの一般的な AWS リソースタイプをサポートしています。
サポートされているリソースの一覧については、「リソースタイプのサポート」を参照してください。
トピック考慮事項リソースのスキャンに必要な IAM アクセス許可テンプレートの生成、管理、削除によく使用されるコマンドテンプレートを AWS CDK に移行するCloudFormation IaC ジェネレーターを使用してリソーススキャンを開始するCloudFormation コンソールでスキャンの概要を表示するIaC ジェネレーターを使用してスキャンされたリソースから CloudFormation テンプレートを作成するスキャンしたリソースから CloudFormation スタックを作成する書き込み専用プロパティを解決する
読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。


対象となるドキュメント:
 読み取り権限のある AWS リソースであれば、JSON テンプレートまたは YAML テンプレートを生成できます。
IaC ジェネレーターの機能のテンプレートは、リソースプロパティをプロパティごとに記述することなく、クラウドリソースを確実かつ迅速にモデル化します。

次の表は、IaC の生成機能に使用できるクォータの一覧です。


**回答**
日本語で回答します。

IaC ジェネレーターには、すでに構築したクラウド環境を IaC に変換する機能があります。具体的には、リソーススキャン機能を使用して、既に存在する AWS リソースを IaC テンプレートに変換することができます。リソーススキャン機能では、読み取り権限のある AWS リソースをスキャンし、JSON テンプレートや YAML テンプレートに変換することができます。これにより、すでに構築したクラウド環境を IaC に変換することができます。

---

### 2. 大量の機械学習トレーニングデータはどこに保管すべきですか？その理由も含めて説明してください。


**回答**
大量の機械学習トレーニングデータの保管について、以下のような考慮点を踏まえて回答します。

1. **セキュリティ**: トレーニングデータには、機密情報や個人情報が含まれる可能性があります。したがって、安全な環境で保管することが重要です。
2. **スケーラビリティ**: トレーニングデータの量が増えるにつれて、ストレージの容量や処理能力が必要です。したがって、スケーラビリティの高いストレージやクラウドサービスを選択することが重要です。
3. **アクセス制御**: トレーニングデータにアクセスする権限を持つユーザーの数が増えるにつれて、権限の管理やアクセス制御が必要です。
4. **バックアップ**: トレーニングデータのバックアップを regularly することが重要です。これにより、データの失敗や破損に対処することができます。

以上の考慮点を踏まえて、以下のような保管方法を提案します。

* **Cloud Storage**: Amazon S3, Google

---

### 3. SageMakerのトレーニングジョブが S3 にアクセスするには IAM ユーザーが必要ですか？


**回答**
はい、SageMakerのトレーニングジョブがS3にアクセスするには、IAMユーザーが必要です。

SageMakerは、AWSのサービスであり、S3にアクセスするためにIAMユーザーが必要です。SageMakerは、IAMロールを使用して、S3にアクセスする権限を設定することができます。

特に、SageMakerのトレーニングジョブでは、S3に保存されたデータを読み込み、モデルをトレーニングするために、IAMユーザーが必要です。IAMユーザーは、S3にアクセスする権限を設定することで、SageMakerがS3にアクセスできるようにします。

また、SageMakerのトレーニングジョブでは、IAMロールを使用して、S3にアクセスする権限を設定することができます。例えば、SageMakerのトレーニングジョブに使用するIAMロールには、S3にアクセスする権限を設定することができます。

したがって、SageMakerのトレーニングジョブがS3にアクセ

---

### 4. SageMakerのトレーニング費用を抑える方法はありますか？
対象となるドキュメント:
 SageMaker Unified Studio での Amazon Bedrock のスムーズなオンボーディングエクスペリエンスを促進するために、「ユーザーガイド」で詳細なドキュメントをご覧いただけます。
追加の質問がある場合やさらにサポートが必要な場合は、担当の AWS アカウントチームに遠慮なくお問い合わせください。

Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -

対象となるドキュメント:
 Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -
    (BillableTimeInSeconds / TrainingTimeInSeconds)) * 100 を使用して、マネージド型スポットトレーニングを使用します。
例えば、BillableTimeInSeconds が 100 で TrainingTimeInSeconds が 500 の場合、トレーニングジョブは 500 秒間実行されたが、請求されたのは 100 秒だけであることを意味します。
節約できたのは、(1 - (100/500)) * 100 = 80% です。
Amazon SageMaker AI スポットインスタンスでトレーニングジョブを実行する方法と、マネージドスポットトレーニングの仕組みと請求対象時間を短縮する方法については、次のサンプルノートブックを参照してください。



対象となるドキュメント:
 SageMaker Unified Studio での Amazon Bedrock のスムーズなオンボーディングエクスペリエンスを促進するために、「ユーザーガイド」で詳細なドキュメントをご覧いただけます。
追加の質問がある場合やさらにサポートが必要な場合は、担当の AWS アカウントチームに遠慮なくお問い合わせください。

Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -

対象となるドキュメント:
 Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -
    (BillableTimeInSeconds / TrainingTimeInSeconds)) * 100 を使用して、マネージド型スポットトレーニングを使用します。
例えば、BillableTimeInSeconds が 100 で TrainingTimeInSeconds が 500 の場合、トレーニングジョブは 500 秒間実行されたが、請求されたのは 100 秒だけであることを意味します。
節約できたのは、(1 - (100/500)) * 100 = 80% です。
Amazon SageMaker AI スポットインスタンスでトレーニングジョブを実行する方法と、マネージドスポットトレーニングの仕組みと請求対象時間を短縮する方法については、次のサンプルノートブックを参照してください。




対象となるドキュメント:
 SageMaker Unified Studio での Amazon Bedrock のスムーズなオンボーディングエクスペリエンスを促進するために、「ユーザーガイド」で詳細なドキュメントをご覧いただけます。
追加の質問がある場合やさらにサポートが必要な場合は、担当の AWS アカウントチームに遠慮なくお問い合わせください。

Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -

対象となるドキュメント:
 Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -
    (BillableTimeInSeconds / TrainingTimeInSeconds)) * 100 を使用して、マネージド型スポットトレーニングを使用します。
例えば、BillableTimeInSeconds が 100 で TrainingTimeInSeconds が 500 の場合、トレーニングジョブは 500 秒間実行されたが、請求されたのは 100 秒だけであることを意味します。
節約できたのは、(1 - (100/500)) * 100 = 80% です。
Amazon SageMaker AI スポットインスタンスでトレーニングジョブを実行する方法と、マネージドスポットトレーニングの仕組みと請求対象時間を短縮する方法については、次のサンプルノートブックを参照してください。



対象となるドキュメント:
 SageMaker Unified Studio での Amazon Bedrock のスムーズなオンボーディングエクスペリエンスを促進するために、「ユーザーガイド」で詳細なドキュメントをご覧いただけます。
追加の質問がある場合やさらにサポートが必要な場合は、担当の AWS アカウントチームに遠慮なくお問い合わせください。

Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -

対象となるドキュメント:
 Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -
    (BillableTimeInSeconds / TrainingTimeInSeconds)) * 100 を使用して、マネージド型スポットトレーニングを使用します。
例えば、BillableTimeInSeconds が 100 で TrainingTimeInSeconds が 500 の場合、トレーニングジョブは 500 秒間実行されたが、請求されたのは 100 秒だけであることを意味します。
節約できたのは、(1 - (100/500)) * 100 = 80% です。
Amazon SageMaker AI スポットインスタンスでトレーニングジョブを実行する方法と、マネージドスポットトレーニングの仕組みと請求対象時間を短縮する方法については、次のサンプルノートブックを参照してください。




対象となるドキュメント:
 SageMaker Unified Studio での Amazon Bedrock のスムーズなオンボーディングエクスペリエンスを促進するために、「ユーザーガイド」で詳細なドキュメントをご覧いただけます。
追加の質問がある場合やさらにサポートが必要な場合は、担当の AWS アカウントチームに遠慮なくお問い合わせください。

Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -

対象となるドキュメント:
 Amazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIAmazon SageMaker AI でのマネージドスポットトレーニング - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker AI でのマネージドスポットトレーニングAmazon SageMaker AI を使用すると、マネージド Amazon EC2 スポットインスタンスを使用して機械学習モデルを簡単にトレーニングできます。
マネージド型のスポットトレーニングでは、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
SageMaker AI は、ユーザーに代わってスポットの中断を管理します。
マネージドスポットトレーニングでは、オンデマンドインスタンスではなく Amazon EC2 スポットインスタンスを使用してトレーニングジョブを実行します。
スポットインスタンスを使用するトレーニングジョブと、SageMaker AI が Amazon EC2 スポットインスタンスを使用してジョブの実行を待機する時間を指定する停止条件を指定できます。
トレーニングの実行中に生成されたメトリクスとログは、CloudWatch にあります。
Amazon SageMaker AI 自動モデル調整は、ハイパーパラメータ調整とも呼ばれ、マネージドスポットトレーニングを使用できます。
自動モデルチューニングの詳細については、「SageMaker AI による自動モデル調整」を参照してください。
スポットインスタンスは中断されることがあります。
その場合、ジョブの開始または終了に時間がかかる場合があります。
チェックポイントを使用するように、マネージドスポットトレーニングジョブを設定できます。
SageMaker AI はチェックポイントデータをローカルパスから Amazon S3 にコピーします。
ジョブが再起動されると、SageMaker AI は Amazon S3 からローカルパスにデータをコピーします。
その結果、トレーニングジョブは最初からではなく、最後のチェックポイントから再開できます。
チェックポイントの詳細については、Amazon SageMaker AI のチェックポイントを参照してください。
注記トレーニングジョブがすぐに完了しない限り、マネージド型のスポットトレーニングでチェックポイントを使用することをお勧めします。
チェックポイントを使用しない SageMaker AI 組み込みアルゴリズムとマーケットプレイスアルゴリズムは現在、3600 秒 (60 分) MaxWaitTimeInSecondsの に制限されています。
マネージド型スポットトレーニングを使用するには、トレーニングジョブを作成します。
EnableManagedSpotTraining を True に設定し、MaxWaitTimeInSeconds を指定します。
MaxWaitTimeInSeconds は、MaxRuntimeInSeconds より大きい値にする必要があります。
トレーニングジョブの作成の詳細については、「DescribeTrainingJob」を参照してください。
削減率を計算するには、式 (1 -
    (BillableTimeInSeconds / TrainingTimeInSeconds)) * 100 を使用して、マネージド型スポットトレーニングを使用します。
例えば、BillableTimeInSeconds が 100 で TrainingTimeInSeconds が 500 の場合、トレーニングジョブは 500 秒間実行されたが、請求されたのは 100 秒だけであることを意味します。
節約できたのは、(1 - (100/500)) * 100 = 80% です。
Amazon SageMaker AI スポットインスタンスでトレーニングジョブを実行する方法と、マネージドスポットトレーニングの仕組みと請求対象時間を短縮する方法については、次のサンプルノートブックを参照してください。



**回答**
SageMakerのトレーニング費用を抑える方法として、以下のような方法があります。

1. マネージドスポットトレーニング：マネージドスポットトレーニングを使用することで、オンデマンドインスタンスと比較して、トレーニングモデルのコストを最大 90% 抑えることができます。
2. チェックポイントの使用：チェックポイントを使用することで、トレーニングジョブが中断された場合、最後のチェックポイントから再開することができます。
3. 自動モデル調整：自動モデル調整を使用することで、ハイパーパラメータ調整を自動化し、トレーニングの効率を向上させることができます。
4. トレーニングジョブの最適化：トレーニングジョブの最適化を行うことで、トレーニングの時間を短縮し、コストを抑えることができます。
5. Spot Instance の使用：Spot Instance を使用することで、トレーニングジョブを実行するインスタンスのコストを抑えることができます。

また、SageMaker AI のド

---

### 5. Notebook Instance と SageMaker Studio はどう使い分けるべきですか？
対象となるドキュメント:
 ブラウザで JavaScript が無効になっているか、使用できません。
AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。
手順については、使用するブラウザのヘルプページを参照してください。
ドキュメントの表記規則グループの削除ドメイン内の SageMaker AI リソースを表示するこのページは役に立ちましたか? - はいページが役に立ったことをお知らせいただき、ありがとうございます。
お時間がある場合は、何が良かったかお知らせください。
今後の参考にさせていただきます。
このページは役に立ちましたか? - いいえこのページは修正が必要なことをお知らせいただき、ありがとうございます。
ご期待に沿うことができず申し訳ありません。
お時間がある場合は、ドキュメントを改善する方法についてお知らせください。

Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIAmazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか?重要2023 年 11 月 30 日以降、従来の Amazon SageMaker Studio のエクスペリエンスは Amazon SageMaker Studio Classic と名前が変更されました。
以下のセクションは、Studio Classic アプリケーションの使用を前提とした内容です。
更新後の Studio エクスペリエンスを使用する場合は、「Amazon SageMaker Studio」を参照してください。
新しいノートブックを起動する場合は、Amazon SageMaker AI コンソールからノートブックインスタンスを起動する代わりに、Amazon SageMaker Studio Classic でノートブックを作成することをお勧めします。
Studio Classic ノートブックには、次のような多くの利点があります。




対象となるドキュメント:
 直接アクセス: IAM アイデンティティセンターを使用する場合、固有の URL を通じて IAM アイデンティティセンターの認証情報を使用して Studio Classic に直接アクセスできます。
ノートブック AWS Management Console を実行するために を操作する必要はありません。

最適化されたイメージ: Studio Classic ノートブックには、あらかじめ定義された一連の SageMaker イメージ設定が用意されており、すぐに使用を開始することができます。


対象となるドキュメント:
 ブラウザで JavaScript が無効になっているか、使用できません。
AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。
手順については、使用するブラウザのヘルプページを参照してください。
ドキュメントの表記規則グループの削除ドメイン内の SageMaker AI リソースを表示するこのページは役に立ちましたか? - はいページが役に立ったことをお知らせいただき、ありがとうございます。
お時間がある場合は、何が良かったかお知らせください。
今後の参考にさせていただきます。
このページは役に立ちましたか? - いいえこのページは修正が必要なことをお知らせいただき、ありがとうございます。
ご期待に沿うことができず申し訳ありません。
お時間がある場合は、ドキュメントを改善する方法についてお知らせください。

Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIAmazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか?重要2023 年 11 月 30 日以降、従来の Amazon SageMaker Studio のエクスペリエンスは Amazon SageMaker Studio Classic と名前が変更されました。
以下のセクションは、Studio Classic アプリケーションの使用を前提とした内容です。
更新後の Studio エクスペリエンスを使用する場合は、「Amazon SageMaker Studio」を参照してください。
新しいノートブックを起動する場合は、Amazon SageMaker AI コンソールからノートブックインスタンスを起動する代わりに、Amazon SageMaker Studio Classic でノートブックを作成することをお勧めします。
Studio Classic ノートブックには、次のような多くの利点があります。



対象となるドキュメント:
 直接アクセス: IAM アイデンティティセンターを使用する場合、固有の URL を通じて IAM アイデンティティセンターの認証情報を使用して Studio Classic に直接アクセスできます。
ノートブック AWS Management Console を実行するために を操作する必要はありません。

最適化されたイメージ: Studio Classic ノートブックには、あらかじめ定義された一連の SageMaker イメージ設定が用意されており、すぐに使用を開始することができます。


対象となるドキュメント:
 ブラウザで JavaScript が無効になっているか、使用できません。
AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。
手順については、使用するブラウザのヘルプページを参照してください。
ドキュメントの表記規則グループの削除ドメイン内の SageMaker AI リソースを表示するこのページは役に立ちましたか? - はいページが役に立ったことをお知らせいただき、ありがとうございます。
お時間がある場合は、何が良かったかお知らせください。
今後の参考にさせていただきます。
このページは役に立ちましたか? - いいえこのページは修正が必要なことをお知らせいただき、ありがとうございます。
ご期待に沿うことができず申し訳ありません。
お時間がある場合は、ドキュメントを改善する方法についてお知らせください。

Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIAmazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか?重要2023 年 11 月 30 日以降、従来の Amazon SageMaker Studio のエクスペリエンスは Amazon SageMaker Studio Classic と名前が変更されました。
以下のセクションは、Studio Classic アプリケーションの使用を前提とした内容です。
更新後の Studio エクスペリエンスを使用する場合は、「Amazon SageMaker Studio」を参照してください。
新しいノートブックを起動する場合は、Amazon SageMaker AI コンソールからノートブックインスタンスを起動する代わりに、Amazon SageMaker Studio Classic でノートブックを作成することをお勧めします。
Studio Classic ノートブックには、次のような多くの利点があります。




対象となるドキュメント:
 直接アクセス: IAM アイデンティティセンターを使用する場合、固有の URL を通じて IAM アイデンティティセンターの認証情報を使用して Studio Classic に直接アクセスできます。
ノートブック AWS Management Console を実行するために を操作する必要はありません。

最適化されたイメージ: Studio Classic ノートブックには、あらかじめ定義された一連の SageMaker イメージ設定が用意されており、すぐに使用を開始することができます。


対象となるドキュメント:
 ブラウザで JavaScript が無効になっているか、使用できません。
AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。
手順については、使用するブラウザのヘルプページを参照してください。
ドキュメントの表記規則グループの削除ドメイン内の SageMaker AI リソースを表示するこのページは役に立ちましたか? - はいページが役に立ったことをお知らせいただき、ありがとうございます。
お時間がある場合は、何が良かったかお知らせください。
今後の参考にさせていただきます。
このページは役に立ちましたか? - いいえこのページは修正が必要なことをお知らせいただき、ありがとうございます。
ご期待に沿うことができず申し訳ありません。
お時間がある場合は、ドキュメントを改善する方法についてお知らせください。

Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIAmazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか?重要2023 年 11 月 30 日以降、従来の Amazon SageMaker Studio のエクスペリエンスは Amazon SageMaker Studio Classic と名前が変更されました。
以下のセクションは、Studio Classic アプリケーションの使用を前提とした内容です。
更新後の Studio エクスペリエンスを使用する場合は、「Amazon SageMaker Studio」を参照してください。
新しいノートブックを起動する場合は、Amazon SageMaker AI コンソールからノートブックインスタンスを起動する代わりに、Amazon SageMaker Studio Classic でノートブックを作成することをお勧めします。
Studio Classic ノートブックには、次のような多くの利点があります。



対象となるドキュメント:
 直接アクセス: IAM アイデンティティセンターを使用する場合、固有の URL を通じて IAM アイデンティティセンターの認証情報を使用して Studio Classic に直接アクセスできます。
ノートブック AWS Management Console を実行するために を操作する必要はありません。

最適化されたイメージ: Studio Classic ノートブックには、あらかじめ定義された一連の SageMaker イメージ設定が用意されており、すぐに使用を開始することができます。


対象となるドキュメント:
 ブラウザで JavaScript が無効になっているか、使用できません。
AWS ドキュメントを使用するには、JavaScript を有効にする必要があります。
手順については、使用するブラウザのヘルプページを参照してください。
ドキュメントの表記規則グループの削除ドメイン内の SageMaker AI リソースを表示するこのページは役に立ちましたか? - はいページが役に立ったことをお知らせいただき、ありがとうございます。
お時間がある場合は、何が良かったかお知らせください。
今後の参考にさせていただきます。
このページは役に立ちましたか? - いいえこのページは修正が必要なことをお知らせいただき、ありがとうございます。
ご期待に沿うことができず申し訳ありません。
お時間がある場合は、ドキュメントを改善する方法についてお知らせください。

Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIAmazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか? - Amazon SageMaker AIドキュメントAmazon SageMakerデベロッパーガイド翻訳は機械翻訳により提供されています。
提供された翻訳内容と英語版の間で齟齬、不一致または矛盾がある場合、英語版が優先します。
Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスはどのように違いますか?重要2023 年 11 月 30 日以降、従来の Amazon SageMaker Studio のエクスペリエンスは Amazon SageMaker Studio Classic と名前が変更されました。
以下のセクションは、Studio Classic アプリケーションの使用を前提とした内容です。
更新後の Studio エクスペリエンスを使用する場合は、「Amazon SageMaker Studio」を参照してください。
新しいノートブックを起動する場合は、Amazon SageMaker AI コンソールからノートブックインスタンスを起動する代わりに、Amazon SageMaker Studio Classic でノートブックを作成することをお勧めします。
Studio Classic ノートブックには、次のような多くの利点があります。




対象となるドキュメント:
 直接アクセス: IAM アイデンティティセンターを使用する場合、固有の URL を通じて IAM アイデンティティセンターの認証情報を使用して Studio Classic に直接アクセスできます。
ノートブック AWS Management Console を実行するために を操作する必要はありません。

最適化されたイメージ: Studio Classic ノートブックには、あらかじめ定義された一連の SageMaker イメージ設定が用意されており、すぐに使用を開始することができます。


**回答**
Amazon SageMaker Studio Classic ノートブックとノートブックインスタンスは、異なる概念です。以下は、両者を使用する際の注意点です。

* ノートブックインスタンス：Amazon SageMaker AI コンソールから直接アクセスすることができます。新しいノートブックを起動する場合は、ノートブックインスタンスを起動する代わりに、Amazon SageMaker Studio Classic でノートブックを作成することをお勧めします。
* SageMaker Studio：2023 年 11 月 30 日以降、従来の Amazon SageMaker Studio のエクスペリエンスは Amazon SageMaker Studio Classic と名前が変更されました。新しいノートブックを起動する場合は、「Amazon SageMaker Studio」を参照してください。

したがって、ノートブックインスタンスは、Amazon SageMaker AI コンソールから直接アクセスすることができるノートブックのインスタンスです。一方、SageMaker Studioは、Amazon SageMaker Studio Classic の名前変更後の新しいノートブックのエクスペリエンスです。

両者を使用する際には、注意

---

### 6. BedrockでDeepSeek-R1を使った場合、どのくらいの推論コストがかかりますか？
対象となるドキュメント:
 料金の例 6: Bedrock データオートメーション標準出力を使用して、組織内の 15,000 分間の会議の音声録音を処理するとします。
15,000 分すべての音声処理にかかる合計コストは 90 USD です。
  合計処理時間 = 15,000 分 合計料金 = 15,000 分 × 0.006 USD = 90 USD
アプリケーションデベロッパーは、時間単位で、Amazon Bedrock に対して次の API コールを実行します: 入力テキストの 2K トークンの入力を 1K トークン (推論トークンを含む) の出力に要約する、DeepSeek-R1 モデルに対するリクエスト:



対象となるドキュメント:
 料金の例 6: Bedrock データオートメーション標準出力を使用して、組織内の 15,000 分間の会議の音声録音を処理するとします。
15,000 分すべての音声処理にかかる合計コストは 90 USD です。
  合計処理時間 = 15,000 分 合計料金 = 15,000 分 × 0.006 USD = 90 USD
アプリケーションデベロッパーは、時間単位で、Amazon Bedrock に対して次の API コールを実行します: 入力テキストの 2K トークンの入力を 1K トークン (推論トークンを含む) の出力に要約する、DeepSeek-R1 モデルに対するリクエスト:



対象となるドキュメント:
 料金の例 6: Bedrock データオートメーション標準出力を使用して、組織内の 15,000 分間の会議の音声録音を処理するとします。
15,000 分すべての音声処理にかかる合計コストは 90 USD です。
  合計処理時間 = 15,000 分 合計料金 = 15,000 分 × 0.006 USD = 90 USD
アプリケーションデベロッパーは、時間単位で、Amazon Bedrock に対して次の API コールを実行します: 入力テキストの 2K トークンの入力を 1K トークン (推論トークンを含む) の出力に要約する、DeepSeek-R1 モデルに対するリクエスト:



対象となるドキュメント:
 料金の例 6: Bedrock データオートメーション標準出力を使用して、組織内の 15,000 分間の会議の音声録音を処理するとします。
15,000 分すべての音声処理にかかる合計コストは 90 USD です。
  合計処理時間 = 15,000 分 合計料金 = 15,000 分 × 0.006 USD = 90 USD
アプリケーションデベロッパーは、時間単位で、Amazon Bedrock に対して次の API コールを実行します: 入力テキストの 2K トークンの入力を 1K トークン (推論トークンを含む) の出力に要約する、DeepSeek-R1 モデルに対するリクエスト:



対象となるドキュメント:
 料金の例 6: Bedrock データオートメーション標準出力を使用して、組織内の 15,000 分間の会議の音声録音を処理するとします。
15,000 分すべての音声処理にかかる合計コストは 90 USD です。
  合計処理時間 = 15,000 分 合計料金 = 15,000 分 × 0.006 USD = 90 USD
アプリケーションデベロッパーは、時間単位で、Amazon Bedrock に対して次の API コールを実行します: 入力テキストの 2K トークンの入力を 1K トークン (推論トークンを含む) の出力に要約する、DeepSeek-R1 モデルに対するリクエスト:

**回答**
参考資料に基づいて、BedrockでDeepSeek-R1を使用した場合、1Kトークンの出力に要約するために必要な推論コストは、0.006 USD per 2K input tokensです。

したがって、15,000分間の会議の音声録音を処理するために必要な推論コストは、15,000分 × 0.006 USD = 90 USDとなります。

---
### 評価結果
| 評価番号 | LLMによる判定スコア | 人による判定 | 備考 |
|:--------:|:------:|:------:|:------:|
| 1 | 2.00 | OK | IaCジェネレータの記載がある |
| 2 | 1.00 | OK | しかし、引っ掛けてほしい参考文献は見つけられていない（英語だからか） |    
| 3 | 0.00 | NG | 前後で言っていることが違う。参考文献を見つけることができていない | 
| 4 | 2.00 | OK | 適切に拾えている。 | 
| 5 | 1.00 | NG | 使い分けの議論になっていない。ゴミに引っかかった |
| 6 | 0.00 | NG | 適切な箇所を拾えていない（同じものをたくさん拾ってしまった） | 


## 結果分析
ベースモデル vs. RAGありモデルの比較

| 評価番号 | ベース（スコア／人判定） | RAGあり（スコア／人判定） |     変化    |
| :--: | :----------: | :------------: | :-------: |
|   1  |   2.00 / NG  |    2.00 / OK   |    正答率↑   |
|   2  |   0.00 / OK  |    1.00 / OK   |    スコア↑   |
|   3  |   0.00 / NG  |    0.00 / NG   |    変化なし   |
|   4  |   0.00 / NG  |    2.00 / OK   |    正答率↑   |
|   5  |   0.00 / NG  |    1.00 / NG   | スコア↑もNG継続 |
|   6  |   0.00 / NG  |    0.00 / NG   |    変化なし   |

### 改善したケース

  * **設問1, 4**：RAGにより該当ドキュメントから正確な機能説明とコスト削減策を抽出でき、 人-OK 判定に転じた。
  * **設問2, 5**：スコアが向上したものの、設問5は依然として要件（使い分け）に踏み込めずNG。

### 悪化または変化なしのケース

  * **設問3, 6**：どちらもRAGの参照先が適切にヒットせず、誤情報あるいは冗長な情報抽出に終始。RAGの恩恵を受けられなかった。

---
## 考察
### RAGの有効性

ベースLLMではモデル知識カットオフや一般化しすぎる傾向から、最新機能や専門的な内容に回答できていない。
一方、RAGは公式ドキュメントを参照することで具体的で正確な情報を提供できている。


### RAGの限界と課題

#### 多言語への対応
質問２に関しては、想定される参考文書が英語で書かれているため
検索にヒットできなかったと考えられる
一般に、質問文は日本語で入力される一方で、想定する公式ドキュメントや最新情報の多くは英語で提供されている。

シンプルな対策として、クエリを翻訳する方法が考えられるが翻訳品質が問題となることが想定される。
より、日本語に適した埋め込みモデルを利用することも考えられる。
inf-retriever-v1-1.5bは中国語と英語データに特化してファインチューニングされているとのこと。

しかし、Multilingualのwiki jaやweb jaの結果は他と比較して悪くないのでモデルが原因ではないかもしれない。

引用：https://huggingface.co/infly/inf-retriever-v1-1.5b

#### 意味的関連性
問３は「IAMユーザーは必要か？」という問で
回答が書かれたドキュメントにはIAMロールという言葉はあるがIAMユーザーという言葉は出てこない
このように、関連性が高くとも同じ用語が出てくるとは限らない。
この場合、IAMユーザーとIAMロールの関係性は高いので、IAMロールとSagemakerで検索に該当すべき。
同一単語がある文章をより参照してしまっている傾向がある。
Rerankのプロンプトに改善の余地あり？

#### 同一情報の参照
同じ情報をトップ５全てに参照してしまっている。
プログラムの問題でもあるが、意味的に同一な文章を複数選んでしまう可能性もあると考えられる
すでに選択されたものを意味的に異なる文章を選択する仕組みが必要